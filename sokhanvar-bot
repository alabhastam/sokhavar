{"cells":[{"source":"<a href=\"https://www.kaggle.com/code/aabdollahii/sokhanvar-pt2?scriptVersionId=277898447\" target=\"_blank\"><img align=\"left\" alt=\"Kaggle\" title=\"Open in Kaggle\" src=\"https://kaggle.com/static/images/open-in-kaggle.svg\"></a>","metadata":{},"cell_type":"markdown"},{"cell_type":"code","execution_count":1,"id":"985a00c1","metadata":{"execution":{"iopub.execute_input":"2025-11-14T15:24:23.799515Z","iopub.status.busy":"2025-11-14T15:24:23.79863Z","iopub.status.idle":"2025-11-14T15:24:26.161722Z","shell.execute_reply":"2025-11-14T15:24:26.160607Z"},"papermill":{"duration":2.369492,"end_time":"2025-11-14T15:24:26.163718","exception":false,"start_time":"2025-11-14T15:24:23.794226","status":"completed"},"tags":[]},"outputs":[],"source":["import pandas as pd\n","import os\n","\n","\n","molana_file_path = '/kaggle/input/molana-poems-csv/.csv' # <-- CHECK THIS FILENAME\n","saadi_file_path = '/kaggle/input/saadi-poems-csv/(1).csv'\n","\n","molana_df = pd.read_csv(molana_file_path)\n","saadi_df = pd.read_csv(saadi_file_path)\n"]},{"cell_type":"code","execution_count":2,"id":"6b3a312f","metadata":{"execution":{"iopub.execute_input":"2025-11-14T15:24:26.170131Z","iopub.status.busy":"2025-11-14T15:24:26.169815Z","iopub.status.idle":"2025-11-14T15:24:26.186889Z","shell.execute_reply":"2025-11-14T15:24:26.185922Z"},"papermill":{"duration":0.022046,"end_time":"2025-11-14T15:24:26.188442","exception":false,"start_time":"2025-11-14T15:24:26.166396","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["โ Successfully combined both datasets.\n","Original column order: ['misra1', 'misra2', 'poet']\n"]}],"source":["# add a new column to combine all the poets together\n","\n","molana_df['poet'] = 'Mowlana'\n","saadi_df['poet'] = 'Saadi'\n","\n","all_poems_df = pd.concat([molana_df, saadi_df], ignore_index=True)\n","print(\"โ Successfully combined both datasets.\")\n","print(\"Original column order:\", all_poems_df.columns.tolist())"]},{"cell_type":"code","execution_count":3,"id":"975f0a8e","metadata":{"execution":{"iopub.execute_input":"2025-11-14T15:24:26.194497Z","iopub.status.busy":"2025-11-14T15:24:26.194218Z","iopub.status.idle":"2025-11-14T15:24:26.213278Z","shell.execute_reply":"2025-11-14T15:24:26.212424Z"},"papermill":{"duration":0.023696,"end_time":"2025-11-14T15:24:26.214561","exception":false,"start_time":"2025-11-14T15:24:26.190865","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>misra1</th>\n","      <th>misra2</th>\n","      <th>poet</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>ฺฉ ฺฏูุฌ ูพุฏุฏ ุขูุฏ ุฏุฑ ุขู ุฏฺฉุงู ุฒุฑฺฉูุจ</td>\n","      <td>ุฒู ุตูุฑุช ุฒู ูุนู ุฒู ุฎูุจ ุฒู ุฎูุจ</td>\n","      <td>Mowlana</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>ุฒู ุจุงุฒุงุฑ ุฒุฑฺฉูุจุงู ุฒู ุงุณุฑุงุฑ ุนููุจุงู</td>\n","      <td>ฺฉู ุฌุงู ูุณู ุงุฒ ุนุดูุด ุจุฑุขุฑุฏ ุดูุฑ ุนููุจ</td>\n","      <td>Mowlana</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>ุฒ ุนุดู ุงู ุฏู ุตุฏ ูู ฺู ูุฌููู ุจูุฏ ูโุฏุฑุฏ</td>\n","      <td>ฺฉุฒ ุงู ุขุชุด ุฒุจูู ุขุฏ ุตุจูุฑโูุง ุงูุจ</td>\n","      <td>Mowlana</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>ุดุฏู ุฒุฑฺฉูุจ ู ุญู ูุงูุฏู ุชูุด ฺูู ุฒุฑูุฑู ูุงูุฏู</td>\n","      <td>ุฌูุงูุฑ ุจุฑ ุทุจู ูุงูุฏู ฺู ุฒุฑฺฉูุจ ฺฉุฑูุจ</td>\n","      <td>Mowlana</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>ุจุง ุจููุงุฒ ุนุงุดู ุฑุง ฺฉู ุชู ุฌุงู ุญูุงู ุฑุง</td>\n","      <td>ุจุฒู ฺฏุฑุฏู ููุงูู ุฑุง ุงฺฏุฑ ุงุฒ ู ุจุงุดูุจ</td>\n","      <td>Mowlana</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>"],"text/plain":["                                     misra1  \\\n","0       ฺฉ ฺฏูุฌ ูพุฏุฏ ุขูุฏ ุฏุฑ ุขู ุฏฺฉุงู ุฒุฑฺฉูุจ   \n","1       ุฒู ุจุงุฒุงุฑ ุฒุฑฺฉูุจุงู ุฒู ุงุณุฑุงุฑ ุนููุจุงู   \n","2   ุฒ ุนุดู ุงู ุฏู ุตุฏ ูู ฺู ูุฌููู ุจูุฏ ูโุฏุฑุฏ   \n","3  ุดุฏู ุฒุฑฺฉูุจ ู ุญู ูุงูุฏู ุชูุด ฺูู ุฒุฑูุฑู ูุงูุฏู   \n","4     ุจุง ุจููุงุฒ ุนุงุดู ุฑุง ฺฉู ุชู ุฌุงู ุญูุงู ุฑุง   \n","\n","                                 misra2     poet  \n","0   ุฒู ุตูุฑุช ุฒู ูุนู ุฒู ุฎูุจ ุฒู ุฎูุจ  Mowlana  \n","1  ฺฉู ุฌุงู ูุณู ุงุฒ ุนุดูุด ุจุฑุขุฑุฏ ุดูุฑ ุนููุจ  Mowlana  \n","2   ฺฉุฒ ุงู ุขุชุด ุฒุจูู ุขุฏ ุตุจูุฑโูุง ุงูุจ  Mowlana  \n","3    ุฌูุงูุฑ ุจุฑ ุทุจู ูุงูุฏู ฺู ุฒุฑฺฉูุจ ฺฉุฑูุจ  Mowlana  \n","4   ุจุฒู ฺฏุฑุฏู ููุงูู ุฑุง ุงฺฏุฑ ุงุฒ ู ุจุงุดูุจ  Mowlana  "]},"execution_count":3,"metadata":{},"output_type":"execute_result"}],"source":["all_poems_df.head()"]},{"cell_type":"code","execution_count":4,"id":"c9231a4a","metadata":{"execution":{"iopub.execute_input":"2025-11-14T15:24:26.220932Z","iopub.status.busy":"2025-11-14T15:24:26.220669Z","iopub.status.idle":"2025-11-14T15:24:26.257781Z","shell.execute_reply":"2025-11-14T15:24:26.256884Z"},"papermill":{"duration":0.041928,"end_time":"2025-11-14T15:24:26.259237","exception":false,"start_time":"2025-11-14T15:24:26.217309","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["<class 'pandas.core.frame.DataFrame'>\n","RangeIndex: 82194 entries, 0 to 82193\n","Data columns (total 3 columns):\n"," #   Column  Non-Null Count  Dtype \n","---  ------  --------------  ----- \n"," 0   misra1  82194 non-null  object\n"," 1   misra2  82194 non-null  object\n"," 2   poet    82194 non-null  object\n","dtypes: object(3)\n","memory usage: 1.9+ MB\n"]}],"source":["all_poems_df.info()"]},{"cell_type":"code","execution_count":5,"id":"fea09913","metadata":{"execution":{"iopub.execute_input":"2025-11-14T15:24:26.265782Z","iopub.status.busy":"2025-11-14T15:24:26.265465Z","iopub.status.idle":"2025-11-14T15:24:26.272211Z","shell.execute_reply":"2025-11-14T15:24:26.271398Z"},"papermill":{"duration":0.01166,"end_time":"2025-11-14T15:24:26.273607","exception":false,"start_time":"2025-11-14T15:24:26.261947","status":"completed"},"tags":[]},"outputs":[],"source":["import re\n","import random\n","\n","# this function is used for a program which is related to the Moshaere system (which has regex systems inside of it. There is another function for talking to user )\n","\n","\n","# words are already normalized \n","def find_reply_poem(user_input: str, poems_df: pd.DataFrame, text_column: str) -> str:\n","    \n","    \n","\n","    # Find the last valid Persian letter of the user's input\n","    last_letter = None\n","    for char in reversed(user_input):\n","        if re.match('[ุข-]', char):\n","            last_letter = char\n","            break # Stop as soon as we find the first valid letter from the end\n","\n","    if last_letter is None:\n","        return \"ูุชุงุณูุงูู ุญุฑู ููุงุณุจ ุจุฑุง ุดุฑูุน ุดุนุฑ ุจุนุฏ ุฏุฑ ูพุงู ุดูุง ูพุฏุง ูฺฉุฑุฏู. ูุทูุง ฺฉ ุจุช ุดุนุฑ ุจูุฑุณุชุฏ.\"\n","\n","    print(f\"DEBUG: User's last letter is '{last_letter}'. Searching for a reply...\")\n","\n","    # Build the regex pattern to find a poem starting with that letter\n","    #    ^ means \"start of the string\"\n","    regex_pattern = f\"^{last_letter}\"\n","\n","    # .str.contains() with regex=True is a powerful way to apply regex to a pandas column\n","    # na=False handles any potential empty/null rows gracefully\n","    matching_poems = poems_df[poems_df[text_column].str.contains(regex_pattern, regex=True, na=False)]\n","\n","    #Select a response\n","    if not matching_poems.empty:\n","        # we found at least one match. Lets pick one randomly.\n","        random_poem_row = matching_poems.sample(1).iloc[0]\n","        \n","        misra1 = random_poem_row['misra1']\n","        misra2 = random_poem_row['misra2']\n","        poet_name = random_poem_row['poet']\n","        \n","        return f\"{misra1}\\n{misra2}\\n\\n- {poet_name}\"\n","    \n","    else:\n","        # If the DataFrame of matches is empty, we couldn't find a reply.\n","        return f\"ุดุนุฑ ฺฉู ุจุง ุงู ุญุฑู ุดุฑูุน ุดู ูพุฏุง ูฺฉุฑุฏู \"\n"]},{"cell_type":"code","execution_count":6,"id":"f10ab509","metadata":{"execution":{"iopub.execute_input":"2025-11-14T15:24:26.279901Z","iopub.status.busy":"2025-11-14T15:24:26.279591Z","iopub.status.idle":"2025-11-14T15:24:26.284827Z","shell.execute_reply":"2025-11-14T15:24:26.284031Z"},"papermill":{"duration":0.009885,"end_time":"2025-11-14T15:24:26.286143","exception":false,"start_time":"2025-11-14T15:24:26.276258","status":"completed"},"tags":[]},"outputs":[],"source":["def handle_conversation(user_input: str) -> str:\n","    patterns = {\n","        r\"(ุณูุงู|ุฏุฑูุฏ|ููุช ุจุฎุฑ)\": \"ุณูุงู! ฺู ฺฉูฺฉ ุงุฒ ุฏุณุช ูู ุจุฑ ูุงุฏุ\",\n","        r\"(ฺุทูุฑ|ุฎูุจ|ฺู ุฎุจุฑ)\": \"ูููููุ ูู ฺฉ ุจุฑูุงูู ฺฉุงููพูุชุฑ ูุณุชู ู ุญุงูู ููุดู ุฎูุจู. ุดูุง ฺุทูุฑุฏุ\",\n","        r\"(ุชู ฺฉ ูุณุช|ุงุณูุช ฺู)\": \"ูู ฺฉ ุฑุจุงุช ูุดุงุนุฑู ูุณุชู ฺฉู ุจุฑ ุงุณุงุณ ุงุดุนุงุฑ ูููุงูุง ู ุณุนุฏ ุณุงุฎุชู ุดุฏูโุงู.\",\n","        r\"(ฺฺฉุงุฑ ูฺฉู|ฺู ฺฉุงุฑ ูฺฉู)\": \"ูู ุจุฑุง ูุดุงุนุฑู ุณุงุฎุชู ุดุฏูโุงู. ุดูุง ฺฉ ุจุช ุดุนุฑ ุจูุฑุณุชุฏ ุชุง ูู ุจุง ุจุช ุจุนุฏ ูพุงุณุฎ ุฏูู.\"\n","    }\n","\n","    for pattern, response in patterns.items():\n","        if re.search(pattern, user_input):\n","            return response\n","\n","    return \"ูุชูุฌู ููุธูุฑุชูู ูุดุฏู. ุงฺฏุฑ ูโุฎูุงูุฏ ูุดุงุนุฑู ฺฉููุ ูุทูุง ฺฉ ุจุช ุดุนุฑ ุจูุฑุณุชุฏ.\"\n"]},{"cell_type":"markdown","id":"df9f91a1","metadata":{"papermill":{"duration":0.002425,"end_time":"2025-11-14T15:24:26.291237","exception":false,"start_time":"2025-11-14T15:24:26.288812","status":"completed"},"tags":[]},"source":["- I used the code below for detecting the user's preferred poet"]},{"cell_type":"code","execution_count":7,"id":"d7459e04","metadata":{"execution":{"iopub.execute_input":"2025-11-14T15:24:26.297577Z","iopub.status.busy":"2025-11-14T15:24:26.297317Z","iopub.status.idle":"2025-11-14T15:24:26.307584Z","shell.execute_reply":"2025-11-14T15:24:26.3069Z"},"papermill":{"duration":0.015161,"end_time":"2025-11-14T15:24:26.308737","exception":false,"start_time":"2025-11-14T15:24:26.293576","status":"completed"},"tags":[]},"outputs":[],"source":["# list of words \n","MOWLANA_KEYWORDS = [\n","    \"ุดูุณ\", \"ุชุจุฑุฒ\", \"ุชุจุฑุฒ\", \"ุฎุงููุด\", \"ูููุงูุง\", \"ูููู\", \"ุฑูู\",\n","    \"ุตูุงุญ ุงูุฏู\", \"ุญุณุงู ุงูุฏู\", \"ุฐูุงูุฌูุงู\", \"ุฐูุงูููุงุฑ\",\n","    \"ุณูุงุน\", \"ุณูุทุงู\", \"ุขูุชุงุจ\", \"ุฎูุฑุดุฏ\", \"ููุฑ\", \"ูุงู\", \"ูุณุช\", \"ูุณุชุงู\", \"ูุณุช\", \"ุฏูุงูู\", \n","    \"ุณุงู\", \"ุจุงุฏู\", \"ุดุฑุงุจ\", \"ุงุณุฑุงุฑ\", \"ุฎุฑุงุจุงุช\", \"ูุนุดูู\", \"ุนุงุดูุงู\", \"ุนุงุดู\",\n","    \"ุขุณูุงู\", \"ุงููุงฺฉ\", \"ฺฏุฑุฏูู\", \"ูพููุงู\", \"ุฎูุงุฌู\", \"ุงุดุงู\", \"ุงูุงู\",\n","    \"ุฎูุฏุงู\", \"ุฑูุต\", \"ุฏูุงูฺฏ\", \"ุณููุงู\", \"ุณููุงู\", \"ูพุบุงูุจุฑ\", \"ุดฺฉุฑุณุชุงู\", \"ููุฏุณุชุงู\",\n","    \"ุจุงุบ\", \"ุจุณุชุงู\", \"ฺฏูุณุชุงู\", \n","    \"ุฌููู\", \"ููฺู\", \"ุฎุงูู\", \"ฺฏุฑุฏุฏ\", \"ฺฏูุฏ\", \"ุฒูู\", \"ูพุฑูุงูู\", \"ูุงฺฏูุงู\",\n","    \"ุณุฑฺฏุฑุฏุงู\", \"ุงุจุฑุงูู\", \"ูพุดูุงู\", \"ฺฏูุฑุณุชุงู\", \"ุจูุงูุนุฌุจ\", \"ูุณููุงูุงู\", \"ุฑูุญุงูุงู\",\n","    \"ุตูุฑุช\", \"ูุนู\", \" ุนุฏู\", \"ูุฌูุฏ\", \"ุฐุฑู\", \"ุฏุฑุง\", \"ููุฌ\", \"ฺฏููุฑ\", \"ุตุฏู\",\n","    \"ุฌุงูุงู\", \"ุดุฑู\", \"ุฎุณุฑู\", \"ูุฑูุงุฏ\", \"ูุณู\", \"ุนููุจ\", \"ููุณ\", \"ุนุณ\",\n","    \"ุขุชุด\", \"ููุฑ\", \"ฺุฑุงุบ\", \"ุดูุน\"\n","]\n","SAADI_KEYWORDS = [\n","    \"ุณุนุฏ\", \"ุณุนุฏุง\", \"ฺฏูุณุชุงู\", \"ุจูุณุชุงู\", \"ุดุฑุงุฒ\",\n","    \"ุฏูุณุชุงู\", \"ุฏูุณุช\", \"ุฏุดูู\", \"ุฏุดููุงู\", \"ุนูุฏ\", \"ูพูุงู\", \"ููุง\", \"ุฌูุง\",\n","    \"ูพุงุฏุดุงู\", \"ูพุงุฏุดู\", \"ูพุงุฏุดุงูุงู\", \"ููฺฉ\", \"ุฏุฑูุด\", \"ุฏุฑูุดุงู\", \"ุชูุงูฺฏุฑ\",\n","    \"ุฎุฑุฏููุฏ\", \"ุฎุฑุฏููุฏุงู\", \"ุฑูุฒฺฏุงุฑ\", \"ุขุฏู\", \"ุขุฏูุช\", \"ุจู ุขุฏู\", \"ุตุงุญุจุฏูุงู\", \"ุตุงุญุจุฏู\",\n","    \"ุฏููุช\", \"ุนุงูู\", \"ูุฑุฏู\", \"ูุณฺฉู\", \"ุบุฑุจ\", \"ุชู\", \"ุงุณุฑ\", \"ุฒูุฏุงู\",\n","    \"ุญฺฉุงุช\", \"ูุตุญุช\", \"ูพูุฏ\", \"ุงุฏุจ\", \"ุชุฑุจุช\",\n","    \"ุฒูุฏฺฏุงู\", \"ููุฑุจุงู\", \"ุงูุฏูุงุฑ\", \"ูพุงุฑุณุง\", \"ูพุณูุฏุฏู\", \"ุดฺฉุจุง\", \"ุฌูุงููุฑุฏ\", \"ุฌูุงููุฑุฏ\",\n","    \"ูพุฑูุฑุฏฺฏุงุฑ\", \"ุฎุฏุงููุฏ\", \"ุฒุฑุฏุณุชุงู\", \"ุฏุฑุฏููุฏุงู\", \"ูพุฑูุฒฺฏุงุฑ\", \"ูุฑูุงูุฏู\",\n","    \"ูุฒุงุฑ\", \"ุฏฺฏุฑ\", \"ุดุฑู\", \"ูุงูุช\", \"ุดูุดุฑ\", \"ุชุฑ\", \"ฺฉูุงู\", \"ุณูพุฑ\",\n","    \"ููฺฉู\", \"ฺฏููุฏ\", \"ุดูุฏู\", \"ุฎูุด\", \"ุฎูุดุชู\", \"ุงูุฏุดู\", \"ุจฺุงุฑู\", \"ุงุฎุชุงุฑ\", \"ฺฏุฑูุชุงุฑ\",\n","    \"ุณูุฑ\", \"ูุธุฑ\", \"ุฎุจุฑ\", \"ููุฑ\", \"ฺฏุฐุฑ\", \"ูพุณุฑ\", \"ูพุฏุฑ\",\n","    \"ุตูุฑุช\", \"ููุงูุช\", \"ุณูุงูุช\", \"ูุถุง\", \"ูุถุงูุช\"\n","]\n","\n","\n","def guess_the_poet(user_input: str) -> str:\n","    \"\"\"\n","    ุจุง ุชุญูู ฺฉููุงุช ฺฉูุฏ ุฏุฑ ุดุนุฑ ฺฉุงุฑุจุฑุ ุดุงุนุฑ ุขู ุฑุง ุญุฏุณ ูโุฒูุฏ.\n","    \"\"\"\n","    mowlana_score = 0\n","    saadi_score = 0\n","    \n","    \n","    # pattern for finding words\n","    mowlana_pattern = r\"\\b(\" + \"|\".join(MOWLANA_KEYWORDS) + r\")\\b\"\n","    saadi_pattern = r\"\\b(\" + \"|\".join(SAADI_KEYWORDS) + r\")\\b\"\n","    \n","    # lenght of this is our score\n","    mowlana_matches = re.findall(mowlana_pattern, user_input)\n","    saadi_matches = re.findall(saadi_pattern, user_input)\n","    \n","    mowlana_score = len(mowlana_matches)\n","    saadi_score = len(saadi_matches)\n","    \n","    # ููุงุด ุงูุชุงุฒุงุช ุจุฑุง ุฏุจุงฺฏ ฺฉุฑุฏู (ูโุชูุงูุฏ ุจุนุฏุงู ุงู ุฎุท ุฑุง ุญุฐู ฺฉูุฏ)\n","    print(f\"DEBUG: Mowlana Score: {mowlana_score} (Matches: {mowlana_matches}) | Saadi Score: {saadi_score} (Matches: {saadi_matches})\")\n","    \n","    # ูุฏู ฺูุงุฑู: ููุงุณู ุงูุชุงุฒุงุช ู ุงุนูุงู ูุชุฌู\n","    if mowlana_score > saadi_score:\n","        return \"ุจู ูุธุฑู ุงู ุดุนุฑ ุงุฒ ูููุงูุงุณุช. ุงูุชุฎุงุจ ุฒุจุง ุจูุฏ!\"\n","    elif saadi_score > mowlana_score:\n","        return \"ูฺฉุฑ ูโฺฉูู ุงู ุจุช ุงุฒ ุณุนุฏ ุจุงุดุฏ. ุจุณุงุฑ ุฏููุดู!\"\n","    elif mowlana_score > 0 and mowlana_score == saadi_score:\n","        return \"ฺู ุฌุงูุจ! ุงู ุดุนุฑ ูู ฺฉููุงุช ฺฉูุฏ ูููุงูุง ู ูู ุณุนุฏ ุฑุง ุฏุงุฑุฏ. ุชุดุฎุตุด ุจุฑุงู ุณุฎุช ุงุณุช.\"\n","    else:\n","        # ุงฺฏุฑ ูฺ ฺฉููู ฺฉูุฏ ูพุฏุง ูุดุฏุ ูฺ ูพุงู ุจุฑููโฺฏุฑุฏุงูู\n","        return None\n"]},{"cell_type":"code","execution_count":8,"id":"44212770","metadata":{"execution":{"iopub.execute_input":"2025-11-14T15:24:26.315334Z","iopub.status.busy":"2025-11-14T15:24:26.315066Z","iopub.status.idle":"2025-11-14T15:24:26.43076Z","shell.execute_reply":"2025-11-14T15:24:26.429784Z"},"papermill":{"duration":0.121084,"end_time":"2025-11-14T15:24:26.432403","exception":false,"start_time":"2025-11-14T15:24:26.311319","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["--- ๐ค Chatbot Moshare ูุนุงู ุดุฏ ---\n","ฺฉ ุจุช ุดุนุฑ ุจูุฑุณุชุฏ ุชุง ุจุง ุจุช ุจุนุฏ ูพุงุณุฎ ุฏูู.\n","ุงฺฏุฑ ูุฎูุงู ูุดุงุนุฑู ฺฉูู ูุทูุง ุงุฒ ุนูุงุฆู ูฺฏุงุฑุด ุงุณุชูุงุฏู ูฺฉู ุญุช ุงุฒ ููุทู\n","ุงฺฏุฑ ูุฎูุงู ุตุญุจุช ฺฉูู ุงุฏุช ุจุงุดู ุจุงุฏ ุงุฒ ุนูุงุฆู ูฺฏุงุฑุด ุงุณุชูุงุฏู ฺฉู\n","ุจุฑุง ุฎุฑูุฌุ ุนุจุงุฑุช 'ุฎุฑูุฌ' ุฑุง ุชุงูพ ฺฉูุฏ.\n","--------------------\n","DEBUG: Mowlana Score: 0 (Matches: []) | Saadi Score: 0 (Matches: [])\n","DEBUG: User's last letter is 'ุฏ'. Searching for a reply...\n","\n","ุฑุจุงุช: ุฏุฑ ูุชุงุฏูุฏ ุงุฒ ููุญู ุงูุตุงููู\n","ุฏุฑ ฺู ุจุงุจู ุจุจุณุชู ุณุฑูฺฏูู\n","\n","- Mowlana\n","\n","--------------------\n","DEBUG: Mowlana Score: 0 (Matches: []) | Saadi Score: 0 (Matches: [])\n","DEBUG: User's last letter is 'ุฏ'. Searching for a reply...\n","\n","ุฑุจุงุช: ุฏุฑ ุญุถุฑุช ุญู ุณุชูุฏู ุฏุฑูุดุงููุฏ\n","ุฏุฑ ุตุฏุฑ ุจุฒุฑฺฏ ููู ุจุฎูุดุงููุฏ\n","\n","- Mowlana\n","\n","--------------------\n","DEBUG: Mowlana Score: 0 (Matches: []) | Saadi Score: 0 (Matches: [])\n","DEBUG: User's last letter is 'ุฏ'. Searching for a reply...\n","\n","ุฑุจุงุช: ุฏุฑ ุขู ุฒูุงู ฺฉู ุฎุฑุงู ุจูู ุฎุฑ ุจู ุจู ฺฏุฑูุฏ\n","ุฒู ุฒูุงู ู ุฒู ุญุงูุช ู ุฒู ุญุงูู\n","\n","- Mowlana\n","\n","--------------------\n"]}],"source":["POEM_COLUMN_NAME = 'misra1' \n","\n","\n","\n","print(\"--- ๐ค Chatbot Moshare ูุนุงู ุดุฏ ---\")\n","print(\"ฺฉ ุจุช ุดุนุฑ ุจูุฑุณุชุฏ ุชุง ุจุง ุจุช ุจุนุฏ ูพุงุณุฎ ุฏูู.\")\n","print(\"ุงฺฏุฑ ูุฎูุงู ูุดุงุนุฑู ฺฉูู ูุทูุง ุงุฒ ุนูุงุฆู ูฺฏุงุฑุด ุงุณุชูุงุฏู ูฺฉู ุญุช ุงุฒ ููุทู\")\n","print(\"ุงฺฏุฑ ูุฎูุงู ุตุญุจุช ฺฉูู ุงุฏุช ุจุงุดู ุจุงุฏ ุงุฒ ุนูุงุฆู ูฺฏุงุฑุด ุงุณุชูุงุฏู ฺฉู\")\n","print(\"ุจุฑุง ุฎุฑูุฌุ ุนุจุงุฑุช 'ุฎุฑูุฌ' ุฑุง ุชุงูพ ฺฉูุฏ.\")\n","print(\"-\" * 20)\n","\n","n = 0 \n","while (n<3):\n","    try:\n","        user_input = (\"ุนุดู ูู ฺฉุฌุงุฏ\")\n","        \n","        if user_input.strip().lower() in [\"ุฎุฑูุฌ\", \"exit\", \"quit\"]:\n","            print(\"ุฎูุดุญุงู ุงุฒ ูู ุตุญุจุช ุจุง ุดูุง. ุฎุฏุงูฺฏูุฏุงุฑ!\")\n","            break\n","\n","        \n","        \n","        if 'ุ' in user_input or '!' in user_input:\n","            bot_reply = handle_conversation(user_input)\n","\n","        \n","        else:\n","            \n","            poet_guess_message = guess_the_poet(user_input)\n","            bot_reply = find_reply_poem(user_input, all_poems_df, POEM_COLUMN_NAME)\n","            if poet_guess_message: \n","                print(f\"({poet_guess_message})\")\n","\n","        \n","        print(f\"\\nุฑุจุงุช: {bot_reply}\\n\")\n","        print(\"-\" * 20)\n","        n = n + 1\n","\n","    except (KeyboardInterrupt, EOFError):\n","        print(\"\\nุฎุฏุง ูฺฏูุฏุงุฑ!\")\n","        break\n","    except Exception as e:\n","        print(f\"ฺฉ ุฎุทุง ุบุฑููุชุธุฑู ุฑุฎ ุฏุงุฏ: {e}\")\n","        break"]}],"metadata":{"kaggle":{"accelerator":"none","dataSources":[{"datasetId":8682116,"sourceId":13656357,"sourceType":"datasetVersion"},{"datasetId":8682151,"sourceId":13656402,"sourceType":"datasetVersion"}],"dockerImageVersionId":31192,"isGpuEnabled":false,"isInternetEnabled":true,"language":"python","sourceType":"notebook"},"kernelspec":{"display_name":"Python 3","language":"python","name":"python3"},"language_info":{"codemirror_mode":{"name":"ipython","version":3},"file_extension":".py","mimetype":"text/x-python","name":"python","nbconvert_exporter":"python","pygments_lexer":"ipython3","version":"3.11.13"},"papermill":{"default_parameters":{},"duration":7.517279,"end_time":"2025-11-14T15:24:26.953484","environment_variables":{},"exception":null,"input_path":"__notebook__.ipynb","output_path":"__notebook__.ipynb","parameters":{},"start_time":"2025-11-14T15:24:19.436205","version":"2.6.0"}},"nbformat":4,"nbformat_minor":5}